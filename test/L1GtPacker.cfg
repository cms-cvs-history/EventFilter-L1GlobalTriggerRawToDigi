//
// cfg file to pack a GT DAQ record
//

process TestGtPacker = {

    // source file: GT produced file, with GMT and GCT records included 
    source = PoolSource {
        untracked vstring fileNames = {
            'file:/afs/cern.ch/user/g/ghete/scratch0/CmsswTestFiles/testGt_Packer_source.root'
        }
        untracked int32  maxEvents = 10
    }   
    
    // load and configure modules
    include "EventFilter/L1GlobalTriggerRawToDigi/data/l1GtPack.cfi"
    // ActiveBoardsMask: 0000 0001 0000 0001 // FDL and GMT only
    replace l1GtPack.ActiveBoardsMask = 0x0101 

    // module dump = DumpFEDRawDataProduct{ }   

    // module list
    path p = { l1GtPack }
    // path p = { l1GtPack, dump }

    // uncomment / comment messages with DEBUG mode to run in DEBUG mode
    service = MessageLogger {

      untracked vstring destinations =  {"testGt_Packer"}
      untracked PSet testGt_Packer = { 
          untracked string threshold = "DEBUG"                  // DEBUG mode 
          untracked PSet DEBUG = { untracked int32 limit = -1}  // DEBUG mode, all messages  
//          untracked PSet DEBUG = { untracked int32 limit = 10}  // DEBUG mode, max 10 messages  
          untracked PSet INFO = { untracked int32 limit = -1}    
      }
      untracked vstring debugModules = { "l1GtPack"}          // DEBUG mode 
      
    }
        
    module outputL1GtPack = PoolOutputModule { 

        // keep only packed data in the ROOT file
        untracked vstring outputCommands = {
            "drop *",
            "keep *_l1GtPack_*_*"
        }

        untracked string fileName = "testGt_Packer_output.root" 
    }
    endpath outpath = { outputL1GtPack }
    
        
}