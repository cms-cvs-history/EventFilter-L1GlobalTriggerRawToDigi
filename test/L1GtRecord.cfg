//
// cfg file to produce L1GlobalTriggerRecord 
//

process TestGtRecord = {

    // source file: L1 GT DAQ readout record
    source = PoolSource {
        untracked vstring fileNames = {
            'file:/afs/cern.ch/user/g/ghete/scratch0/CmsswTestFiles/testGt_GtRecord_source.root'
        }
    }   

    untracked PSet maxEvents = { untracked int32 input = 10 }

    // load and configure modules

    // L1 GT EventSetup
    include "L1TriggerConfig/L1GtConfigProducers/data/L1GtConfig.cff"

    
    // L1 GT record producer
    include "EventFilter/L1GlobalTriggerRawToDigi/data/l1GtRecord.cfi"

    // input tag for GT readout collection: 
    //     gtDigis       = GT emulator or GT unpacker (default)
    //replace l1GtRecord.L1GtReadoutRecordTag = l1GtEmulDigis

    // module list
    path p = { l1GtRecord}
    
    // uncomment / comment messages with DEBUG mode to run in DEBUG mode
    service = MessageLogger {

      untracked vstring destinations =  {"testGt_GtRecord"}
      untracked PSet testGt_GtRecord = { 
          untracked string threshold = "DEBUG"                    // DEBUG mode 
          untracked PSet DEBUG = { untracked int32 limit = -1}    // DEBUG mode, all messages  
          //untracked PSet DEBUG = { untracked int32 limit = 10}  // DEBUG mode, max 10 mess.  
          untracked PSet INFO = { untracked int32 limit = -1}    
      }
      untracked vstring debugModules = { "l1GtRecord"}            // DEBUG mode 
      
    }
        
    module outputL1GtRecord = PoolOutputModule { 

        // keep only unpacked data in the ROOT file
        untracked vstring outputCommands = {
            "drop *",
            "keep *_l1GtRecord_*_*"
        }

        untracked string fileName = "testGt_GtRecord_output.root" 
    }
    endpath outpath = { outputL1GtRecord }


}