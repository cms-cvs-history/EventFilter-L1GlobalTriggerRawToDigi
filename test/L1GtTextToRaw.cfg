//
// cfg file to pack a GT DAQ starting from dumped Spy data
//

process TestGtTextToRaw = {

    // source file: ASCII file, hex format, one 64bits word per line  

    source = EmptySource {
        untracked int32 maxEvents = 10
    }   

    
    // load and configure modules

    module vmeToRaw = L1GtTextToRaw {
        untracked string TextFileName = "/afs/cern.ch/user/g/ghete/scratch0/CmsswTestFiles/testGt_TextToRaw_source.txt"
        untracked int32 RawDataSize = 872
        untracked int32 FedId = 813
    }

    // module list
    path p = { vmeToRaw }

    // uncomment / comment messages with DEBUG mode to run in DEBUG mode
    service = MessageLogger {

      untracked vstring destinations =  {"testGt_TextToRaw"}
      untracked PSet testGt_TextToRaw = { 
          untracked string threshold = "DEBUG"                  // DEBUG mode 
          untracked PSet DEBUG = { untracked int32 limit = -1}  // DEBUG mode, all messages  
//          untracked PSet DEBUG = { untracked int32 limit = 10}  // DEBUG mode, max 10 messages  
          untracked PSet INFO = { untracked int32 limit = -1}    
      }
      untracked vstring debugModules = { "vmeToRaw"}          // DEBUG mode 
      
    }
        
    module outputL1GtTextToRaw = PoolOutputModule { 

        // keep only packed data in the ROOT file
        untracked vstring outputCommands = {
            "drop *",
            "keep *_vmeToRaw_*_*"
        }

        untracked string fileName = "testGt_TextToRaw_output.root" 
    }
    endpath outpath = { outputL1GtTextToRaw }
    
        
}