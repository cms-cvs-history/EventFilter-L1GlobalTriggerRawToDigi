//
// cfg file to unpack FED GT DAQ record
//

process TestGtUnpacker = {

    source = NewEventStreamFileReader {
        untracked vstring fileNames = {
'/store/data/GlobalNov07/A/000/030/625/GlobalNov07.00030625.0001.A.storageManager.0.0000.dat'
        }
    }



    untracked PSet maxEvents = { untracked int32 input = 100 }

    // load and configure modules

    // L1 GT EventSetup
    include "L1TriggerConfig/L1GtConfigProducers/data/L1GtConfig.cff"

    // L1 GMT EventSetup
    include "L1TriggerConfig/L1ScalesProducers/data/L1MuTriggerScalesConfig.cff"
    include "L1TriggerConfig/L1ScalesProducers/data/L1MuGMTScalesConfig.cff"
    include "L1TriggerConfig/GMTConfigProducers/data/L1MuGMTParametersConfig.cff"   
    
    // L1 GT/GMT unpack
    include "EventFilter/L1GlobalTriggerRawToDigi/data/l1GtUnpack.cfi"

    // input tag for GT readout collection: 
    //     source        = hardware record
    //     l1GtPack      = GT packer - DigiToRaw (default) 
    //     l1GtTextToRaw = GT TextToRaw

    replace l1GtUnpack.DaqGtInputTag = "source"
    //replace l1GtUnpack.DaqGtInputTag = l1GtTextToRaw

    // Active Boards Mask

    // no board masked (default)
    //replace l1GtUnpack.ActiveBoardsMask = 0xFFFF
    
    // GTFE only in the record
    //replace l1GtUnpack.ActiveBoardsMask = 0x0000

    // GTFE + FDL 
    //replace l1GtUnpack.ActiveBoardsMask = 0x0001
     
    // GTFE + GMT 
    //replace l1GtUnpack.ActiveBoardsMask = 0x0100

    // GTFE + FDL + GMT 
    //replace l1GtUnpack.ActiveBoardsMask = 0x0101

    // BxInEvent to be unpacked
    // all available BxInEvent (default)
    //replace l1GtUnpack.UnpackBxInEvent = -1 

    // BxInEvent = 0 (L1A)
    // replace l1GtUnpack.UnpackBxInEvent = 1 

    // 3 BxInEvent (F, 0, 1)  
    //replace l1GtUnpack.UnpackBxInEvent = 3 

    module l1TrigSource = L1TrigSourceNovGR {     }

    // module list
    path p = { l1GtUnpack, l1TrigSource }
    
    service = MessageLogger {     }
//    service = MessageLogger {
//      untracked vstring destinations =  {"cout"}
//      untracked PSet cout = { 
//          untracked string threshold = "DEBUG"                    // DEBUG mode 
//          untracked PSet DEBUG = { untracked int32 limit = -1}    // DEBUG mode, all messages  
//          //untracked PSet DEBUG = { untracked int32 limit = 10}  // DEBUG mode, max 10 mess.  
//          untracked PSet INFO = { untracked int32 limit = -1}    
//      }
//      untracked vstring debugModules = { "l1GtUnpack"}            // DEBUG mode      
//    }
    
        
}