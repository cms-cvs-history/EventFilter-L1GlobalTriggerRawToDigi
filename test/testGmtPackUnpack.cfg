process GMTTEST = {

  untracked PSet maxEvents = {untracked int32 input = -1}

  service = MessageLogger {
     untracked vstring destinations = {"cout"}
     untracked PSet cout = { 
       untracked string threshold = "DEBUG"                  // DEBUG mode 
       untracked PSet DEBUG = { untracked int32 limit = -1}  // DEBUG mode, all messages  
     }
     untracked vstring debugModules = { "l1GtPack", "l1GtUnpack"}          // DEBUG mode 
  }

  source = L1MuGMTHWFileReader {

    untracked vstring fileNames = {"file:/afs/cern.ch/user/i/imikulec/big/CMSSW_1_6_0_pre2/src/L1Trigger/GlobalMuonTrigger/test/gmt_testfile.small.dat"}

  }

  include "L1Trigger/GlobalMuonTrigger/data/l1GmtEmulDigis.cff"
//  replace l1GmtEmulDigis.Debug = 9
  replace l1GmtEmulDigis.BX_min = -1
  replace l1GmtEmulDigis.BX_max = 1
  replace l1GmtEmulDigis.BX_min_readout = -1
  replace l1GmtEmulDigis.BX_max_readout = 1

  include "L1Trigger/GlobalTrigger/data/l1GtEmulDigis.cfi"
  replace l1GtEmulDigis.inputMask = { 1, 0}

  include "EventFilter/L1GlobalTriggerRawToDigi/data/l1GtPack.cfi"
    replace l1GtPack.ActiveBoardsMask =0x0100
  include "EventFilter/L1GlobalTriggerRawToDigi/data/l1GtUnpack.cfi"
  
  module dump1 = L1MuGMTDump { untracked InputTag GMTInputTag = l1GmtEmulDigis }
  module dump2 = L1MuGMTDump { untracked InputTag GMTInputTag = l1GtUnpack }

  path p = { l1GmtEmulDigis, l1GtEmulDigis, l1GtPack, l1GtUnpack, dump1, dump2 } 

  module out = PoolOutputModule { untracked string fileName = "gmtPackUnpack.root" }
  endpath outpath = { out }

}
